!function(){"use strict";const e={videos:{mobile:{src:"https://storage.yandexcloud.net/external-assets/tantum/modal-game/mobile.mp4",type:"video/mp4",pausePoints:[4.5,10,15,20.5]},desktop:{src:"https://storage.yandexcloud.net/external-assets/tantum/modal-game/desktop.mp4",type:"video/mp4",pausePoints:[4.29,9.9,15,20.5]}},buttonStyles:{desktop:{width:"130px",height:"130px"},mobile:{width:"130px",height:"130px"},imageUrl:"https://storage.yandexcloud.net/external-assets/tantum/modal-game/circle.png",videoUrl:"https://storage.yandexcloud.net/external-assets/tantum/modal-game/hello.png"},modalOverlayColor:"rgba(0, 0, 0, 0.7)",modalBackground:"transparent"};let t=null,n=null,o=null,i=null,d=-1,a=!1,s=null,l=!1,r=null;function c(){return e.buttonStyles[window.innerWidth<=768?"mobile":"desktop"]}function p(){const e=document.getElementById("video-modal-content");if(!e)return;const t=o.videoWidth/o.videoHeight||16/9,n=.9*window.innerWidth,i=.9*window.innerHeight;let d=n,a=d/t;a>i&&(a=i,d=a*t),e.style.width=`${d}px`,e.style.height=`${a}px`}function u(){l=!1,n.style.display="flex";const e=o.play();void 0!==e&&e.catch((()=>{o.play()})),setTimeout((()=>{n.style.opacity="1",document.getElementById("video-modal-content").style.transform="translateY(0)"}),10),document.body.style.overflow="hidden",d=-1,a=!1,p(),function(){const e=()=>{if(l)return;const t=o.currentTime,n=s.pausePoints[d+1];void 0!==n&&(a?t>=n&&(o.currentTime=n):t>=n&&(a=!0,o.currentTime=n)),r=requestAnimationFrame(e)};r=requestAnimationFrame(e)}()}function m(){if(l)return void h();const e=s.pausePoints[d+1];if(a)return a=!1,d++,o.currentTime+=.3,void o.play();const t=o.currentTime;void 0!==e&&e-t<=1&&d++}function h(){n.style.opacity="0",document.getElementById("video-modal-content").style.transform="translateY(30px)",r&&cancelAnimationFrame(r),setTimeout((()=>{n.style.display="none",o.pause(),o.currentTime=0,document.body.style.overflow=""}),300)}function g(){l=!0,a=!1}document.addEventListener("DOMContentLoaded",(function(){(function(){t=document.createElement("button"),t.id="video-modal-trigger";const n=c(),o=document.createElement("div");o.className="video-button-content";const d=document.createElement("img");d.src=e.buttonStyles.imageUrl,i=document.createElement("video"),i.muted=!0,i.loop=!0,i.playsInline=!0,i.autoplay=!0,i.src=e.buttonStyles.videoUrl.replace(".png",".mp4"),Object.assign(d.style,{width:"100%",height:"100%",objectFit:"contain",position:"absolute",top:"0",left:"0",zIndex:"1"}),Object.assign(i.style,{width:"80%",height:"70%",objectFit:"contain",position:"absolute",top:"10%",left:"10%",zIndex:"2",borderRadius:"50%"}),Object.assign(o.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",borderRadius:"50%"}),Object.assign(t.style,{position:"fixed",bottom:"110px",right:"20px",width:n.width,height:n.height,backgroundColor:"transparent",border:"none",cursor:"pointer",borderRadius:"50%",zIndex:"1039",boxShadow:"0px 0px 50px rgba(0, 0, 0, 0.3)",padding:"0"}),o.appendChild(d),o.appendChild(i),t.appendChild(o),document.body.appendChild(t),setTimeout((()=>{i&&i.play().catch((()=>{}))}),100)})(),function(){n=document.createElement("div"),Object.assign(n.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:e.modalOverlayColor,display:"none",alignItems:"center",justifyContent:"center",zIndex:"1101",opacity:"0",transition:"opacity 0.3s ease"});const t=document.createElement("div");t.id="video-modal-content",Object.assign(t.style,{backgroundColor:e.modalBackground,borderRadius:"12px",overflow:"hidden",position:"relative",transform:"translateY(30px)",transition:"transform 0.3s ease",maxWidth:"90vw",maxHeight:"90vh"});const i=document.createElement("button");i.innerHTML="Ã—",Object.assign(i.style,{position:"absolute",top:"10px",right:"10px",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",border:"none",borderRadius:"50%",cursor:"pointer",fontSize:"20px",zIndex:"1110"}),o=document.createElement("video"),o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline",""),o.muted=!0,o.preload="auto",Object.assign(o.style,{width:"100%",height:"100%",display:"block",backgroundColor:"#000"}),t.appendChild(i),t.appendChild(o),n.appendChild(t),document.body.appendChild(n),i.addEventListener("click",h),function(){const e=document.createElement("style");e.textContent="@media (max-width: 768px) { #video-modal-trigger { width: 120px; height: 120px; } }",document.head.appendChild(e)}()}(),t.addEventListener("click",u),n.addEventListener("click",(e=>{e.target===n&&h()})),o.addEventListener("click",m),o.addEventListener("ended",g),o.addEventListener("loadedmetadata",p),window.addEventListener("resize",(()=>{!function(){const e=c();t.style.width=e.width,t.style.height=e.height}(),"flex"===n.style.display&&p()}));const d=window.innerWidth<=768;s=e.videos[d?"mobile":"desktop"],o.src=s.src}))}();